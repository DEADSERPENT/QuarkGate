# ============================================================
#  GraphQL Gateway Service - Configuration
# ============================================================

# --- Server ---
quarkus.http.port=8080
quarkus.application.name=graphql-gateway

# --- GraphQL ---
quarkus.smallrye-graphql.ui.always-include=true
quarkus.smallrye-graphql.schema-include-directives=true

# --- CORS (for React frontend at localhost:5173) ---
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:5173
quarkus.http.cors.methods=GET,POST,OPTIONS
quarkus.http.cors.headers=Content-Type,Accept,Authorization

# --- REST Client: User Service ---
quarkus.rest-client.user-api.url=http://localhost:8081
quarkus.rest-client.user-api.scope=jakarta.inject.Singleton
quarkus.rest-client.user-api.connect-timeout=2000
quarkus.rest-client.user-api.read-timeout=5000

# --- REST Client: Product Service ---
quarkus.rest-client.product-api.url=http://localhost:8082
quarkus.rest-client.product-api.scope=jakarta.inject.Singleton
quarkus.rest-client.product-api.connect-timeout=2000
quarkus.rest-client.product-api.read-timeout=5000

# --- REST Client: Order Service ---
quarkus.rest-client.order-api.url=http://localhost:8083
quarkus.rest-client.order-api.scope=jakarta.inject.Singleton
quarkus.rest-client.order-api.connect-timeout=2000
quarkus.rest-client.order-api.read-timeout=5000

# --- REST Client: Payment Service ---
quarkus.rest-client.payment-api.url=http://localhost:8084
quarkus.rest-client.payment-api.scope=jakarta.inject.Singleton
quarkus.rest-client.payment-api.connect-timeout=2000
quarkus.rest-client.payment-api.read-timeout=5000

# --- Redis Cache ---
quarkus.redis.hosts=redis://localhost:6379
quarkus.cache.type=caffeine

# --- Health & Metrics ---
quarkus.health.extensions.enabled=true
quarkus.micrometer.export.prometheus.enabled=true

# --- OpenTelemetry (Distributed Tracing) ---
quarkus.otel.exporter.otlp.traces.endpoint=http://localhost:4317
quarkus.otel.service.name=graphql-gateway
quarkus.otel.traces.sampler=always_on

# --- Logging ---
quarkus.log.level=INFO
quarkus.log.category."org.acme".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# --- Docker (for container builds) ---
quarkus.container-image.group=acme
quarkus.container-image.name=graphql-gateway
quarkus.container-image.tag=latest

# ============================================================
#  Profile-specific overrides for Docker Compose
# ============================================================
%docker.quarkus.rest-client.user-api.url=http://user-service:8081
%docker.quarkus.rest-client.product-api.url=http://product-service:8082
%docker.quarkus.rest-client.order-api.url=http://order-service:8083
%docker.quarkus.rest-client.payment-api.url=http://payment-service:8084
%docker.quarkus.redis.hosts=redis://redis:6379
%docker.quarkus.otel.exporter.otlp.traces.endpoint=http://jaeger:4317
